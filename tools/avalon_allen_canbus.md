https://github.com/commaai/neo/blob/master/car_harness/open_pinout.sch.pdf

BUS0 : CAR

BUS2 :  CAMERA

BUS1 :  Radar



OP receive car data from bus0 and send to CAMERA via  bus2(130)

bus0	(recive from CAR BUS)
-------------------------------------
0024(  36)(  2157) 01ff01ff420580f3
0025(  37)(  4314) 00120002600000a1
0072( 114)(  1204) 005a005a2b
00AA( 170)(  4314) 1a6f1a6f1a6f1a6f
00B4( 180)(  2157) 00000000010000bd
00BA( 186)(  1438) 000000be
0163( 355)(  2633) 13e9010020
01AA( 426)(   863) 0000000000b1
01C4( 452)(  1832) 03ff1c0840007fb2
01D0( 464)(  1317) 0785090000d84187
01D2( 466)(  1359) 9904004c005a001e
01D3( 467)(  1359) 0028000000000004
0220( 544)(  1438) 00000026
0226( 550)(  1438) 0000100000000000
0228( 552)(  2157) 0000002e
0232( 562)(  1438) 05050800004c
0260( 608)(  2157) 00fffdffae000013
0262( 610)(  1079) 0000000200ffff6c
0283( 643)(  1348) 0000000000008c
02C1( 705)(  1359) 0800a500adc500ea
02D8( 728)(   144) 0010010000000000
02F9( 761)(    43) 8000000000000000
02FC( 764)(    43) 8000008000000000
02FF( 767)( 40451) 00000000
0320( 800)(   863) 000000400000006b
032A( 810)(   863) 0837
032C( 812)(   863) 0808000000000047
0336( 822)(   431) 2000000000000000
0338( 824)(   432) 0000000000000000
033E( 830)(   216) 0fff2680001f00
0344( 836)(   899) 0000010000000050
0365( 869)(   215) 00000080fc0008
0366( 870)(   216) 00004d88100a00
0378( 888)(    44) 0302020000000060
037B( 891)(    43) 0000000000000000
0382( 898)(    43) 3939385a3c001f00
0384( 900)(    14) f0f000000000
0386( 902)(    14) 000000070003
0389( 905)(    43) 0020000000000000
0391( 913)(    43) 0000000100000000
0396( 918)(    43) 09000000600f6000
0399( 921)(    43) 0000002800000000
03A5( 933)(    43) 0000000000007efc
03A6( 934)(    14) 0801080108010801
03A7( 935)(    14) 03ff03ff000000ff
03B0( 944)(    43) 0069003e00100000
03B1( 945)(    43) 0000020a000800d0
03B7( 951)(   144) 0000000000000008
03BB( 955)(    42) 00008b0000000000
03BC( 956)(    42) 0020000000000000
03D0( 976)(   172) 00
03E6( 998)(    14) 0000000000
03E7( 999)(    14) 00000000000000
03E8(1000)(    14) 0000000000000000
03E9(1001)(    14) 0000000000000000
03EA(1002)(    43) 0000000000000000
03F6(1014)(    44) 80ea680084000000
03F9(1017)(   172) 90782601810000b4
03FC(1020)(   863) 0000000000000000
0411(1041)(    43) 0020000010008000
0420(1056)(    43) fff40000ff0580a3
0423(1059)(    43) 00
0434(1076)(    43) 904000c000000000
0435(1077)(    43) 820505ffe02f4003
0458(1112)(   216) 5a02005555000000
045A(1114)(   216) 5802000000000000
048C(1164)(    87) 0000000000000000
048D(1165)(    87) 0000000000000000
048E(1166)(    87) 00000000000003f0
048F(1167)(    87) 0000000000000000
04CB(1227)(    43) 0c00000000000000
04D5(1237)(    35) 1500000000000000
04EF(1263)(    36) 1b00000000000000
04FF(1279)(    33) 3f00000200000000
0584(1412)(    43) 0000000000000000
0605(1541)(    43) 0000000000000013
0610(1552)(    86) 20000031c0fffd40
0611(1553)(    43) 2100001000000f8f
0614(1556)(    43) 2900003000009b9f
0615(1557)(     4) 2a00760a00009b9f
0620(1568)(   144) 10000000f000081a
0622(1570)(    44) 1200883800000000
0623(1571)(    43) 1900800000000000
0624(1572)(    43) 1000437070404820
063B(1595)(    85) 160001de00001773
06D1(1745)(    43) d600000000000000
06F3(1779)(    43) 2000000000000000
06FA(1786)(    14) 000003ff03ff0000
06FB(1787)(    14) 000003ff03ff00ff
06FC(1788)(    14) 00000801ff000000
06FD(1789)(    14) 000003ff03ff0000

bus128	(send by OP to CAR BUS)
-------------------------------------
02E4( 740)( 14361) c2000000ad
0343( 835)(  4787) 000063c000000071
0367( 871)(   378) 0000
0412(1042)(   143) 68040c00002c3802
0414(1044)(   144) 0000000000001700
0489(1161)(   143) 0000000000000007
048A(1162)(   143) 0000000000000047
048B(1163)(   143) 66070a0f01000000
04D3(1235)(   120) 1c00000100000000






bus2
-------------------------------------
02E4( 740)(   219) a800000093
0367( 871)(    14) 0800
0412(1042)(     5) 68040c00002c3802
0414(1044)(     5) 0000000000001700
0489(1161)(     5) 000000000000000e
048A(1162)(     5) 000000000000004e
048B(1163)(     5) 66070a0f01000000
04D3(1235)(     4) 1c00000100000000


bus130
-------------------------------------
0024(  36)(  2765) 01fa01f6420180e1
0025(  37)(  5530) 0ffc00020ff90042
0072( 114)(  1542) ffbeffea1d
00AA( 170)(  5529) 2738274327322742
00B4( 180)(  2764) 00000000e90cc475
00BA( 186)(  1843) 000000be
0163( 355)(  3375) 13ca010000
01AA( 426)(  1106) 0000000000b1
01C4( 452)(  2347) 03e41b083400c0cb
01D0( 464)(  1687) 0a1110000138407d
01D2( 466)(  1742) 9904ffa7ffe90006
01D3( 467)(  1742) 00a8290afa0000b1
0220( 544)(  1843) 00000026
0226( 550)(  1843) 0000100000000000
0228( 552)(  2764) 7ecd0079
0232( 562)(  1843) 0dfb00190762
0260( 608)(  2765) 00ff78fd6afe488e
0262( 610)(  1382) 0000000200ffff6c
0283( 643)(  1728) 0000000000008c
02C1( 705)(  1742) 08ff94ff93bc00b4
02D8( 728)(   185) 0010010000000000
02F9( 761)(    56) 8000000000000000
02FC( 764)(    56) 8000008000000000
02FF( 767)( 53925) 00000000
0320( 800)(  1106) 00000040f9000064
032A( 810)(  1106) 0837
032C( 812)(  1106) 0000000000000037
0336( 822)(   552) 2000000000000000
0338( 824)(   553) 0000000000000000
033E( 830)(   277) 1dfa2680000700
0344( 836)(  1152) 0000010000000050
0365( 869)(   276) 00000080fc0008
0366( 870)(   277) 00002d5d203a00
0378( 888)(    56) 0302020000000060
037B( 891)(    55) 0000000000000000
0382( 898)(    56) 3939386e2b001f00
0384( 900)(    19) f0f000000000
0386( 902)(    19) 000000070003
0389( 905)(    55) 0020000000000000
0391( 913)(    55) 0000000100000000
0396( 918)(    55) 09000000600f6000
0399( 921)(    54) 0002002d00000000
03A5( 933)(    55) 0000000000007efc
03A6( 934)(    19) 0801080108010801
03A7( 935)(    19) 03ff03ff000000ff
03B0( 944)(    55) 006b003700100000
03B1( 945)(    56) 0000020a000800d0
03B7( 951)(   185) 0000000000000008
03BB( 955)(    55) 0000b50000000000
03BC( 956)(    55) 0000000000800000
03D0( 976)(   221) 20
03E6( 998)(    19) 0000000000
03E7( 999)(    19) 00000000000000
03E8(1000)(    19) 0000000000000000
03E9(1001)(    19) 0000000000000000
03EA(1002)(    55) 0000000000000000
03F6(1014)(    55) 80ea680084000000
03F9(1017)(   222) 90782601810000b4
03FC(1020)(  1106) 0000000000000020
0411(1041)(    56) 0020000010008000
0420(1056)(    55) fff90000ff0580a8
0423(1059)(    54) 00
0434(1076)(    55) 904000c000000000
0435(1077)(    56) 820505ffe02f4003
0458(1112)(   276) 5a02005555000000
045A(1114)(   277) 5802000000000000
048C(1164)(   111) 0000000000000000
048D(1165)(   111) 0000000000000000
048E(1166)(   111) 00000000000003f0
048F(1167)(   110) 0000000000000000
04CB(1227)(    55) 0c00000000000000
04D5(1237)(    45) 1500000000000000
04EF(1263)(    46) 1b00000000000000
04FF(1279)(    43) 3f00000200000000
0584(1412)(    55) 0000000000000000
0605(1541)(    55) 0000000000000013
0610(1552)(   117) 20802131c0001440
0611(1553)(    55) 2100001000000f90
0614(1556)(    56) 2900003000009ba5
0615(1557)(     6) 2a80760a00009ba5
0620(1568)(   184) 10000000f000040a
0622(1570)(    57) 1200883800000000
0623(1571)(    55) 1900800000000000
0624(1572)(    55) 1000437070404820
063B(1595)(   109) 160001de00003182
06D1(1745)(    55) d600000000000000
06F3(1779)(    55) 2000000000000000
06FA(1786)(    19) 000003ff03ff0000
06FB(1787)(    19) 000003ff03ff00ff
06FC(1788)(    19) 00000801ff000000
06FD(1789)(    19) 000003ff03ff0000



bus1
-------------------------------------
0123( 291)(   127) 0108080d400089
0128( 296)(   396) 01bec0830839
0130( 304)(    13) 000001ff000038
0141( 321)(   792) 00000046
0160( 352)(   198) 000008120effd868
0161( 353)(   198) 0039a80100004b
0210( 528)(   254) 0b1802e210ede907
0211( 529)(   254) 0bfff8000000001d
0212( 530)(   254) 0bfff8000000001e
0213( 531)(   254) 0bfff8000000001f
0214( 532)(   254) 0bfff80000000020
0215( 533)(   254) 0bfff80000000021
0216( 534)(   254) 0bfff80000000022
0217( 535)(   254) 0bfff80000000023
0218( 536)(   254) 0b224ce100ed70d9
0219( 537)(   254) 0b1c501680ed415e
021A( 538)(   254) 0b1122e5a0ee10e5
021B( 539)(   254) 0b28a6dfc0ed7903
021C( 540)(   254) 0b17ace420edb196
021D( 541)(   254) 0b1486e4a0edc1fe
021E( 542)(   254) 0b1ea415e0ed6940
021F( 543)(   254) 0b0e4616a0ee78a4
0220( 544)(   254) 0bfe000000160851
0221( 545)(   254) 0b00000000000036
0222( 546)(   254) 0b00000000000037
0223( 547)(   254) 0b00000000000038
0224( 548)(   254) 0b00000000000039
0225( 549)(   254) 0b0000000000003a
0226( 550)(   254) 0b0000000000003b
0227( 551)(   254) 0b0000000000003c
0228( 552)(   254) 0b0800c2494e
0229( 553)(   254) 0b0000924412
022A( 554)(   254) 0b021c924936
022B( 555)(   254) 0bfc00b24935
022C( 556)(   254) 0b0400a2452a
022D( 557)(   254) 0b0000a2492b
022E( 558)(   254) 0bfe00a24829
022F( 559)(   254) 0bfe0092481a
0230( 560)(   254) 0b7fff730f0044
0231( 561)(   254) 0b01f8f00000002f
0232( 562)(   254) 0b00fe00fe00fe41
0240( 576)(   254) 6000100100100100
0241( 577)(   254) 6000100100100100
0244( 580)(   254) 6000100100100100
0245( 581)(   254) 6000100100100100
0248( 584)(   254) 6000020000000000
0340( 832)(   127) 8803ff00000000d5
0341( 833)(   127) 8803ff00000000d6
0342( 834)(   127) 8803ff00000000d7
0343( 835)(   127) 8803ff00000000d8
0344( 836)(   127) 8803ff00000000d9
0345( 837)(   127) 8803ff00000000da
0363( 867)(   127) 88f92a06d60000f5
0364( 868)(   127) 88000000000001f8
0365( 869)(   126) 87000000000000f7
0370( 880)(   126) 8707ff0000000008
0371( 881)(   126) 8707ff0000000009
0372( 882)(   126) 8707ff000000000a
0373( 883)(   126) 8707ff000000000b
0374( 884)(   126) 8707ff000000000c
0375( 885)(   126) 8707ff000000000d
0380( 896)(   126) 8700000000000012
0381( 897)(   126) 8700000000000013
0382( 898)(   126) 8700000000000014
0383( 899)(   126) 877bb989b2b80440
03D0( 976)(   127) 85cd80c9c5c0bcb7
03D1( 977)(   127) 8580808080808061
03D2( 978)(   127) 8580808080808062
03D3( 979)(   127) 8580808080808063
0466(1126)(    14) 4422d3
0470(1136)(    12) 00000179

bus139
-------------------------------------
NONE













Step 1.  replay OP data

â€‹	replay_op_data.sh 1fc693fc142f4646_2021-01-22--13-22-45 ~/work/op_data/all/



â€‹	 ~/openpilot/selfdrive/debug/can_printer.py 0            receive data from bus0 

â€‹	~/openpilot/selfdrive/debug/can_printer.py  128       OP send data to bus0



Step 2. panda cangateway



â€‹	cd panda(cangw brach)

â€‹	cd board

â€‹	make       Flash Panda CANGW firmware



â€‹	panda.bus0 : target ECU

â€‹    panda.bus1 : kvaser can1



â€‹	set panda to CANGW_MODE

â€‹    cd panda/tools

â€‹    export PYTHONPATH=../..

â€‹    ./hack_ecu_tx.py -b 0                          only care about target ECU send data



Step3.  send data to target

â€‹      export PYTHONPATH=~/openpilot

â€‹      ./cansim_gw 0 can1

â€‹      ./cansim_gw  128 can1





Principle:

â€‹		simulate  send real  can data to CAN1(kavaser socketcan)     CAN1--- panda.bus2

â€‹        set panda cangeteway mode  bus0 to bus2 and bus2 to bus0 



â€‹		all real can data is channel 128 for panda, so if you get data from bus0 ,  the data was sent by target ECU. 



â€‹     